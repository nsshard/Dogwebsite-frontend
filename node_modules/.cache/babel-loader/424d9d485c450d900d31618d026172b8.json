{"ast":null,"code":"'use strict';\n/**\n * Module dependencies.\n */\n\nconst co = require('co');\n\nconst compose = require('koa-compose');\n/**\n * Expose `convert()`.\n */\n\n\nmodule.exports = convert;\n/**\n * Convert Koa legacy generator-based middleware\n * to modern promise-based middleware.\n *\n *\n * @api public\n * */\n\nfunction convert(mw) {\n  if (typeof mw !== 'function') {\n    throw new TypeError('middleware must be a function');\n  } // assume it's Promise-based middleware\n\n\n  if (mw.constructor.name !== 'GeneratorFunction' && mw.constructor.name !== 'AsyncGeneratorFunction') {\n    return mw;\n  }\n\n  const converted = function (ctx, next) {\n    return co.call(ctx, mw.call(ctx, function* (next) {\n      return yield next();\n    }(next)));\n  };\n\n  converted._name = mw._name || mw.name;\n  return converted;\n}\n/**\n * Convert and compose multiple middleware\n * (could mix legacy and modern ones)\n * and return modern promise middleware.\n *\n *\n * @api public\n * */\n// convert.compose(mw, mw, mw)\n// convert.compose([mw, mw, mw])\n\n\nconvert.compose = function (arr) {\n  if (!Array.isArray(arr)) {\n    arr = Array.from(arguments);\n  }\n\n  return compose(arr.map(convert));\n};\n/**\n * Convert Koa modern promise-based middleware\n * to legacy generator-based middleware.\n *\n *\n * @api public\n * */\n\n\nconvert.back = function (mw) {\n  if (typeof mw !== 'function') {\n    throw new TypeError('middleware must be a function');\n  } // assume it's generator middleware\n\n\n  if (mw.constructor.name === 'GeneratorFunction' || mw.constructor.name === 'AsyncGeneratorFunction') {\n    return mw;\n  }\n\n  const converted = function* (next) {\n    const ctx = this;\n    let called = false;\n    yield mw(ctx, function () {\n      if (called) {\n        // guard against multiple next() calls\n        // https://github.com/koajs/compose/blob/4e3e96baf58b817d71bd44a8c0d78bb42623aa95/index.js#L36\n        throw new Error('next() called multiple times');\n      }\n\n      called = true;\n      return co.call(ctx, next);\n    });\n  };\n\n  converted._name = mw._name || mw.name;\n  return converted;\n};","map":{"version":3,"names":["co","require","compose","module","exports","convert","mw","TypeError","constructor","name","converted","ctx","next","call","_name","arr","Array","isArray","from","arguments","map","back","called","Error"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/koa-convert/index.js"],"sourcesContent":["'use strict'\n\n/**\n * Module dependencies.\n */\n\nconst co = require('co')\nconst compose = require('koa-compose')\n\n/**\n * Expose `convert()`.\n */\n\nmodule.exports = convert\n\n/**\n * Convert Koa legacy generator-based middleware\n * to modern promise-based middleware.\n *\n *\n * @api public\n * */\n\nfunction convert (mw) {\n  if (typeof mw !== 'function') {\n    throw new TypeError('middleware must be a function')\n  }\n\n  // assume it's Promise-based middleware\n  if (\n    mw.constructor.name !== 'GeneratorFunction' &&\n    mw.constructor.name !== 'AsyncGeneratorFunction'\n  ) {\n    return mw\n  }\n\n  const converted = function (ctx, next) {\n    return co.call(\n      ctx,\n      mw.call(\n        ctx,\n        (function * (next) { return yield next() })(next)\n      ))\n  }\n\n  converted._name = mw._name || mw.name\n  return converted\n}\n\n/**\n * Convert and compose multiple middleware\n * (could mix legacy and modern ones)\n * and return modern promise middleware.\n *\n *\n * @api public\n * */\n\n// convert.compose(mw, mw, mw)\n// convert.compose([mw, mw, mw])\nconvert.compose = function (arr) {\n  if (!Array.isArray(arr)) {\n    arr = Array.from(arguments)\n  }\n\n  return compose(arr.map(convert))\n}\n\n/**\n * Convert Koa modern promise-based middleware\n * to legacy generator-based middleware.\n *\n *\n * @api public\n * */\n\nconvert.back = function (mw) {\n  if (typeof mw !== 'function') {\n    throw new TypeError('middleware must be a function')\n  }\n\n  // assume it's generator middleware\n  if (mw.constructor.name === 'GeneratorFunction' || mw.constructor.name === 'AsyncGeneratorFunction') {\n    return mw\n  }\n\n  const converted = function * (next) {\n    const ctx = this\n    let called = false\n\n    yield mw(ctx, function () {\n      if (called) {\n        // guard against multiple next() calls\n        // https://github.com/koajs/compose/blob/4e3e96baf58b817d71bd44a8c0d78bb42623aa95/index.js#L36\n        throw new Error('next() called multiple times')\n      }\n\n      called = true\n      return co.call(ctx, next)\n    })\n  }\n\n  converted._name = mw._name || mw.name\n  return converted\n}\n"],"mappings":"AAAA;AAEA;AACA;AACA;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,aAAD,CAAvB;AAEA;AACA;AACA;;;AAEAE,MAAM,CAACC,OAAP,GAAiBC,OAAjB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,OAAT,CAAkBC,EAAlB,EAAsB;EACpB,IAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;IAC5B,MAAM,IAAIC,SAAJ,CAAc,+BAAd,CAAN;EACD,CAHmB,CAKpB;;;EACA,IACED,EAAE,CAACE,WAAH,CAAeC,IAAf,KAAwB,mBAAxB,IACAH,EAAE,CAACE,WAAH,CAAeC,IAAf,KAAwB,wBAF1B,EAGE;IACA,OAAOH,EAAP;EACD;;EAED,MAAMI,SAAS,GAAG,UAAUC,GAAV,EAAeC,IAAf,EAAqB;IACrC,OAAOZ,EAAE,CAACa,IAAH,CACLF,GADK,EAELL,EAAE,CAACO,IAAH,CACEF,GADF,EAEG,WAAYC,IAAZ,EAAkB;MAAE,OAAO,MAAMA,IAAI,EAAjB;IAAqB,CAA1C,CAA4CA,IAA5C,CAFF,CAFK,CAAP;EAMD,CAPD;;EASAF,SAAS,CAACI,KAAV,GAAkBR,EAAE,CAACQ,KAAH,IAAYR,EAAE,CAACG,IAAjC;EACA,OAAOC,SAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AACAL,OAAO,CAACH,OAAR,GAAkB,UAAUa,GAAV,EAAe;EAC/B,IAAI,CAACC,KAAK,CAACC,OAAN,CAAcF,GAAd,CAAL,EAAyB;IACvBA,GAAG,GAAGC,KAAK,CAACE,IAAN,CAAWC,SAAX,CAAN;EACD;;EAED,OAAOjB,OAAO,CAACa,GAAG,CAACK,GAAJ,CAAQf,OAAR,CAAD,CAAd;AACD,CAND;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAA,OAAO,CAACgB,IAAR,GAAe,UAAUf,EAAV,EAAc;EAC3B,IAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;IAC5B,MAAM,IAAIC,SAAJ,CAAc,+BAAd,CAAN;EACD,CAH0B,CAK3B;;;EACA,IAAID,EAAE,CAACE,WAAH,CAAeC,IAAf,KAAwB,mBAAxB,IAA+CH,EAAE,CAACE,WAAH,CAAeC,IAAf,KAAwB,wBAA3E,EAAqG;IACnG,OAAOH,EAAP;EACD;;EAED,MAAMI,SAAS,GAAG,WAAYE,IAAZ,EAAkB;IAClC,MAAMD,GAAG,GAAG,IAAZ;IACA,IAAIW,MAAM,GAAG,KAAb;IAEA,MAAMhB,EAAE,CAACK,GAAD,EAAM,YAAY;MACxB,IAAIW,MAAJ,EAAY;QACV;QACA;QACA,MAAM,IAAIC,KAAJ,CAAU,8BAAV,CAAN;MACD;;MAEDD,MAAM,GAAG,IAAT;MACA,OAAOtB,EAAE,CAACa,IAAH,CAAQF,GAAR,EAAaC,IAAb,CAAP;IACD,CATO,CAAR;EAUD,CAdD;;EAgBAF,SAAS,CAACI,KAAV,GAAkBR,EAAE,CAACQ,KAAH,IAAYR,EAAE,CAACG,IAAjC;EACA,OAAOC,SAAP;AACD,CA5BD"},"metadata":{},"sourceType":"script"}