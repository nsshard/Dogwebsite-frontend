{"ast":null,"code":"\"use strict\";\n\nconst Deferred = require(\"./Deferred\");\n\nconst errors = require(\"./errors\");\n\nfunction fbind(fn, ctx) {\n  return function bound() {\n    return fn.apply(ctx, arguments);\n  };\n}\n/**\n * Wraps a users request for a resource\n * Basically a promise mashed in with a timeout\n * @private\n */\n\n\nclass ResourceRequest extends Deferred {\n  /**\n   * [constructor description]\n   * @param  {Number} ttl     timeout\n   */\n  constructor(ttl, Promise) {\n    super(Promise);\n    this._creationTimestamp = Date.now();\n    this._timeout = null;\n\n    if (ttl !== undefined) {\n      this.setTimeout(ttl);\n    }\n  }\n\n  setTimeout(delay) {\n    if (this._state !== ResourceRequest.PENDING) {\n      return;\n    }\n\n    const ttl = parseInt(delay, 10);\n\n    if (isNaN(ttl) || ttl <= 0) {\n      throw new Error(\"delay must be a positive int\");\n    }\n\n    const age = Date.now() - this._creationTimestamp;\n\n    if (this._timeout) {\n      this.removeTimeout();\n    }\n\n    this._timeout = setTimeout(fbind(this._fireTimeout, this), Math.max(ttl - age, 0));\n  }\n\n  removeTimeout() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    this._timeout = null;\n  }\n\n  _fireTimeout() {\n    this.reject(new errors.TimeoutError(\"ResourceRequest timed out\"));\n  }\n\n  reject(reason) {\n    this.removeTimeout();\n    super.reject(reason);\n  }\n\n  resolve(value) {\n    this.removeTimeout();\n    super.resolve(value);\n  }\n\n}\n\nmodule.exports = ResourceRequest;","map":{"version":3,"names":["Deferred","require","errors","fbind","fn","ctx","bound","apply","arguments","ResourceRequest","constructor","ttl","Promise","_creationTimestamp","Date","now","_timeout","undefined","setTimeout","delay","_state","PENDING","parseInt","isNaN","Error","age","removeTimeout","_fireTimeout","Math","max","clearTimeout","reject","TimeoutError","reason","resolve","value","module","exports"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/generic-pool/lib/ResourceRequest.js"],"sourcesContent":["\"use strict\";\n\nconst Deferred = require(\"./Deferred\");\nconst errors = require(\"./errors\");\n\nfunction fbind(fn, ctx) {\n  return function bound() {\n    return fn.apply(ctx, arguments);\n  };\n}\n\n/**\n * Wraps a users request for a resource\n * Basically a promise mashed in with a timeout\n * @private\n */\nclass ResourceRequest extends Deferred {\n  /**\n   * [constructor description]\n   * @param  {Number} ttl     timeout\n   */\n  constructor(ttl, Promise) {\n    super(Promise);\n    this._creationTimestamp = Date.now();\n    this._timeout = null;\n\n    if (ttl !== undefined) {\n      this.setTimeout(ttl);\n    }\n  }\n\n  setTimeout(delay) {\n    if (this._state !== ResourceRequest.PENDING) {\n      return;\n    }\n    const ttl = parseInt(delay, 10);\n\n    if (isNaN(ttl) || ttl <= 0) {\n      throw new Error(\"delay must be a positive int\");\n    }\n\n    const age = Date.now() - this._creationTimestamp;\n\n    if (this._timeout) {\n      this.removeTimeout();\n    }\n\n    this._timeout = setTimeout(\n      fbind(this._fireTimeout, this),\n      Math.max(ttl - age, 0)\n    );\n  }\n\n  removeTimeout() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n    this._timeout = null;\n  }\n\n  _fireTimeout() {\n    this.reject(new errors.TimeoutError(\"ResourceRequest timed out\"));\n  }\n\n  reject(reason) {\n    this.removeTimeout();\n    super.reject(reason);\n  }\n\n  resolve(value) {\n    this.removeTimeout();\n    super.resolve(value);\n  }\n}\n\nmodule.exports = ResourceRequest;\n"],"mappings":"AAAA;;AAEA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,YAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AAEA,SAASE,KAAT,CAAeC,EAAf,EAAmBC,GAAnB,EAAwB;EACtB,OAAO,SAASC,KAAT,GAAiB;IACtB,OAAOF,EAAE,CAACG,KAAH,CAASF,GAAT,EAAcG,SAAd,CAAP;EACD,CAFD;AAGD;AAED;AACA;AACA;AACA;AACA;;;AACA,MAAMC,eAAN,SAA8BT,QAA9B,CAAuC;EACrC;AACF;AACA;AACA;EACEU,WAAW,CAACC,GAAD,EAAMC,OAAN,EAAe;IACxB,MAAMA,OAAN;IACA,KAAKC,kBAAL,GAA0BC,IAAI,CAACC,GAAL,EAA1B;IACA,KAAKC,QAAL,GAAgB,IAAhB;;IAEA,IAAIL,GAAG,KAAKM,SAAZ,EAAuB;MACrB,KAAKC,UAAL,CAAgBP,GAAhB;IACD;EACF;;EAEDO,UAAU,CAACC,KAAD,EAAQ;IAChB,IAAI,KAAKC,MAAL,KAAgBX,eAAe,CAACY,OAApC,EAA6C;MAC3C;IACD;;IACD,MAAMV,GAAG,GAAGW,QAAQ,CAACH,KAAD,EAAQ,EAAR,CAApB;;IAEA,IAAII,KAAK,CAACZ,GAAD,CAAL,IAAcA,GAAG,IAAI,CAAzB,EAA4B;MAC1B,MAAM,IAAIa,KAAJ,CAAU,8BAAV,CAAN;IACD;;IAED,MAAMC,GAAG,GAAGX,IAAI,CAACC,GAAL,KAAa,KAAKF,kBAA9B;;IAEA,IAAI,KAAKG,QAAT,EAAmB;MACjB,KAAKU,aAAL;IACD;;IAED,KAAKV,QAAL,GAAgBE,UAAU,CACxBf,KAAK,CAAC,KAAKwB,YAAN,EAAoB,IAApB,CADmB,EAExBC,IAAI,CAACC,GAAL,CAASlB,GAAG,GAAGc,GAAf,EAAoB,CAApB,CAFwB,CAA1B;EAID;;EAEDC,aAAa,GAAG;IACd,IAAI,KAAKV,QAAT,EAAmB;MACjBc,YAAY,CAAC,KAAKd,QAAN,CAAZ;IACD;;IACD,KAAKA,QAAL,GAAgB,IAAhB;EACD;;EAEDW,YAAY,GAAG;IACb,KAAKI,MAAL,CAAY,IAAI7B,MAAM,CAAC8B,YAAX,CAAwB,2BAAxB,CAAZ;EACD;;EAEDD,MAAM,CAACE,MAAD,EAAS;IACb,KAAKP,aAAL;IACA,MAAMK,MAAN,CAAaE,MAAb;EACD;;EAEDC,OAAO,CAACC,KAAD,EAAQ;IACb,KAAKT,aAAL;IACA,MAAMQ,OAAN,CAAcC,KAAd;EACD;;AAxDoC;;AA2DvCC,MAAM,CAACC,OAAP,GAAiB5B,eAAjB"},"metadata":{},"sourceType":"script"}