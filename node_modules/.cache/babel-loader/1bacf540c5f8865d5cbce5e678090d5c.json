{"ast":null,"code":"'use strict';\n\nconst FindAndModifyOperation = require('./find_and_modify');\n\nconst hasAtomicOperators = require('../utils').hasAtomicOperators;\n\nclass FindOneAndUpdateOperation extends FindAndModifyOperation {\n  constructor(collection, filter, update, options) {\n    // Final options\n    const finalOptions = Object.assign({}, options);\n    finalOptions.fields = options.projection;\n    finalOptions.update = true;\n    finalOptions.new = typeof options.returnOriginal === 'boolean' ? !options.returnOriginal : false;\n    finalOptions.upsert = typeof options.upsert === 'boolean' ? options.upsert : false;\n\n    if (filter == null || typeof filter !== 'object') {\n      throw new TypeError('Filter parameter must be an object');\n    }\n\n    if (update == null || typeof update !== 'object') {\n      throw new TypeError('Update parameter must be an object');\n    }\n\n    if (!hasAtomicOperators(update)) {\n      throw new TypeError('Update document requires atomic operators');\n    }\n\n    super(collection, filter, finalOptions.sort, update, finalOptions);\n  }\n\n}\n\nmodule.exports = FindOneAndUpdateOperation;","map":{"version":3,"names":["FindAndModifyOperation","require","hasAtomicOperators","FindOneAndUpdateOperation","constructor","collection","filter","update","options","finalOptions","Object","assign","fields","projection","new","returnOriginal","upsert","TypeError","sort","module","exports"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/koa-mongo/node_modules/mongodb/lib/operations/find_one_and_update.js"],"sourcesContent":["'use strict';\n\nconst FindAndModifyOperation = require('./find_and_modify');\nconst hasAtomicOperators = require('../utils').hasAtomicOperators;\n\nclass FindOneAndUpdateOperation extends FindAndModifyOperation {\n  constructor(collection, filter, update, options) {\n    // Final options\n    const finalOptions = Object.assign({}, options);\n    finalOptions.fields = options.projection;\n    finalOptions.update = true;\n    finalOptions.new =\n      typeof options.returnOriginal === 'boolean' ? !options.returnOriginal : false;\n    finalOptions.upsert = typeof options.upsert === 'boolean' ? options.upsert : false;\n\n    if (filter == null || typeof filter !== 'object') {\n      throw new TypeError('Filter parameter must be an object');\n    }\n\n    if (update == null || typeof update !== 'object') {\n      throw new TypeError('Update parameter must be an object');\n    }\n\n    if (!hasAtomicOperators(update)) {\n      throw new TypeError('Update document requires atomic operators');\n    }\n\n    super(collection, filter, finalOptions.sort, update, finalOptions);\n  }\n}\n\nmodule.exports = FindOneAndUpdateOperation;\n"],"mappings":"AAAA;;AAEA,MAAMA,sBAAsB,GAAGC,OAAO,CAAC,mBAAD,CAAtC;;AACA,MAAMC,kBAAkB,GAAGD,OAAO,CAAC,UAAD,CAAP,CAAoBC,kBAA/C;;AAEA,MAAMC,yBAAN,SAAwCH,sBAAxC,CAA+D;EAC7DI,WAAW,CAACC,UAAD,EAAaC,MAAb,EAAqBC,MAArB,EAA6BC,OAA7B,EAAsC;IAC/C;IACA,MAAMC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBH,OAAlB,CAArB;IACAC,YAAY,CAACG,MAAb,GAAsBJ,OAAO,CAACK,UAA9B;IACAJ,YAAY,CAACF,MAAb,GAAsB,IAAtB;IACAE,YAAY,CAACK,GAAb,GACE,OAAON,OAAO,CAACO,cAAf,KAAkC,SAAlC,GAA8C,CAACP,OAAO,CAACO,cAAvD,GAAwE,KAD1E;IAEAN,YAAY,CAACO,MAAb,GAAsB,OAAOR,OAAO,CAACQ,MAAf,KAA0B,SAA1B,GAAsCR,OAAO,CAACQ,MAA9C,GAAuD,KAA7E;;IAEA,IAAIV,MAAM,IAAI,IAAV,IAAkB,OAAOA,MAAP,KAAkB,QAAxC,EAAkD;MAChD,MAAM,IAAIW,SAAJ,CAAc,oCAAd,CAAN;IACD;;IAED,IAAIV,MAAM,IAAI,IAAV,IAAkB,OAAOA,MAAP,KAAkB,QAAxC,EAAkD;MAChD,MAAM,IAAIU,SAAJ,CAAc,oCAAd,CAAN;IACD;;IAED,IAAI,CAACf,kBAAkB,CAACK,MAAD,CAAvB,EAAiC;MAC/B,MAAM,IAAIU,SAAJ,CAAc,2CAAd,CAAN;IACD;;IAED,MAAMZ,UAAN,EAAkBC,MAAlB,EAA0BG,YAAY,CAACS,IAAvC,EAA6CX,MAA7C,EAAqDE,YAArD;EACD;;AAvB4D;;AA0B/DU,MAAM,CAACC,OAAP,GAAiBjB,yBAAjB"},"metadata":{},"sourceType":"script"}