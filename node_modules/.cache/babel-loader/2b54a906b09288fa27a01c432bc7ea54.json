{"ast":null,"code":"'use strict';\n\nconst handleCallback = require('../utils').handleCallback;\n\nconst OperationBase = require('./operation').OperationBase;\n\nconst toError = require('../utils').toError;\n\nclass FindOneOperation extends OperationBase {\n  constructor(collection, query, options) {\n    super(options);\n    this.collection = collection;\n    this.query = query;\n  }\n\n  execute(callback) {\n    const coll = this.collection;\n    const query = this.query;\n    const options = this.options;\n\n    try {\n      const cursor = coll.find(query, options).limit(-1).batchSize(1); // Return the item\n\n      cursor.next((err, item) => {\n        if (err != null) return handleCallback(callback, toError(err), null);\n        handleCallback(callback, null, item);\n      });\n    } catch (e) {\n      callback(e);\n    }\n  }\n\n}\n\nmodule.exports = FindOneOperation;","map":{"version":3,"names":["handleCallback","require","OperationBase","toError","FindOneOperation","constructor","collection","query","options","execute","callback","coll","cursor","find","limit","batchSize","next","err","item","e","module","exports"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/koa-mongo/node_modules/mongodb/lib/operations/find_one.js"],"sourcesContent":["'use strict';\n\nconst handleCallback = require('../utils').handleCallback;\nconst OperationBase = require('./operation').OperationBase;\nconst toError = require('../utils').toError;\n\nclass FindOneOperation extends OperationBase {\n  constructor(collection, query, options) {\n    super(options);\n\n    this.collection = collection;\n    this.query = query;\n  }\n\n  execute(callback) {\n    const coll = this.collection;\n    const query = this.query;\n    const options = this.options;\n\n    try {\n      const cursor = coll\n        .find(query, options)\n        .limit(-1)\n        .batchSize(1);\n\n      // Return the item\n      cursor.next((err, item) => {\n        if (err != null) return handleCallback(callback, toError(err), null);\n        handleCallback(callback, null, item);\n      });\n    } catch (e) {\n      callback(e);\n    }\n  }\n}\n\nmodule.exports = FindOneOperation;\n"],"mappings":"AAAA;;AAEA,MAAMA,cAAc,GAAGC,OAAO,CAAC,UAAD,CAAP,CAAoBD,cAA3C;;AACA,MAAME,aAAa,GAAGD,OAAO,CAAC,aAAD,CAAP,CAAuBC,aAA7C;;AACA,MAAMC,OAAO,GAAGF,OAAO,CAAC,UAAD,CAAP,CAAoBE,OAApC;;AAEA,MAAMC,gBAAN,SAA+BF,aAA/B,CAA6C;EAC3CG,WAAW,CAACC,UAAD,EAAaC,KAAb,EAAoBC,OAApB,EAA6B;IACtC,MAAMA,OAAN;IAEA,KAAKF,UAAL,GAAkBA,UAAlB;IACA,KAAKC,KAAL,GAAaA,KAAb;EACD;;EAEDE,OAAO,CAACC,QAAD,EAAW;IAChB,MAAMC,IAAI,GAAG,KAAKL,UAAlB;IACA,MAAMC,KAAK,GAAG,KAAKA,KAAnB;IACA,MAAMC,OAAO,GAAG,KAAKA,OAArB;;IAEA,IAAI;MACF,MAAMI,MAAM,GAAGD,IAAI,CAChBE,IADY,CACPN,KADO,EACAC,OADA,EAEZM,KAFY,CAEN,CAAC,CAFK,EAGZC,SAHY,CAGF,CAHE,CAAf,CADE,CAMF;;MACAH,MAAM,CAACI,IAAP,CAAY,CAACC,GAAD,EAAMC,IAAN,KAAe;QACzB,IAAID,GAAG,IAAI,IAAX,EAAiB,OAAOjB,cAAc,CAACU,QAAD,EAAWP,OAAO,CAACc,GAAD,CAAlB,EAAyB,IAAzB,CAArB;QACjBjB,cAAc,CAACU,QAAD,EAAW,IAAX,EAAiBQ,IAAjB,CAAd;MACD,CAHD;IAID,CAXD,CAWE,OAAOC,CAAP,EAAU;MACVT,QAAQ,CAACS,CAAD,CAAR;IACD;EACF;;AA3B0C;;AA8B7CC,MAAM,CAACC,OAAP,GAAiBjB,gBAAjB"},"metadata":{},"sourceType":"script"}