{"ast":null,"code":"function SessionManager(options, serializeUser) {\n  if (typeof options == 'function') {\n    serializeUser = options;\n    options = undefined;\n  }\n\n  options = options || {};\n  this._key = options.key || 'passport';\n  this._serializeUser = serializeUser;\n}\n\nSessionManager.prototype.logIn = function (req, user, cb) {\n  var self = this;\n\n  this._serializeUser(user, req, function (err, obj) {\n    if (err) {\n      return cb(err);\n    } // TODO: Error if session isn't available here.\n\n\n    if (!req.session) {\n      req.session = {};\n    }\n\n    if (!req.session[self._key]) {\n      req.session[self._key] = {};\n    }\n\n    req.session[self._key].user = obj;\n    cb();\n  });\n};\n\nSessionManager.prototype.logOut = function (req, cb) {\n  if (req.session && req.session[this._key]) {\n    delete req.session[this._key].user;\n  }\n\n  cb && cb();\n};\n\nmodule.exports = SessionManager;","map":{"version":3,"names":["SessionManager","options","serializeUser","undefined","_key","key","_serializeUser","prototype","logIn","req","user","cb","self","err","obj","session","logOut","module","exports"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/passport/lib/sessionmanager.js"],"sourcesContent":["function SessionManager(options, serializeUser) {\n  if (typeof options == 'function') {\n    serializeUser = options;\n    options = undefined;\n  }\n  options = options || {};\n  \n  this._key = options.key || 'passport';\n  this._serializeUser = serializeUser;\n}\n\nSessionManager.prototype.logIn = function(req, user, cb) {\n  var self = this;\n  this._serializeUser(user, req, function(err, obj) {\n    if (err) {\n      return cb(err);\n    }\n    // TODO: Error if session isn't available here.\n    if (!req.session) {\n      req.session = {};\n    }\n    if (!req.session[self._key]) {\n      req.session[self._key] = {};\n    }\n    req.session[self._key].user = obj;\n    cb();\n  });\n}\n\nSessionManager.prototype.logOut = function(req, cb) {\n  if (req.session && req.session[this._key]) {\n    delete req.session[this._key].user;\n  }\n  \n  cb && cb();\n}\n\n\nmodule.exports = SessionManager;\n"],"mappings":"AAAA,SAASA,cAAT,CAAwBC,OAAxB,EAAiCC,aAAjC,EAAgD;EAC9C,IAAI,OAAOD,OAAP,IAAkB,UAAtB,EAAkC;IAChCC,aAAa,GAAGD,OAAhB;IACAA,OAAO,GAAGE,SAAV;EACD;;EACDF,OAAO,GAAGA,OAAO,IAAI,EAArB;EAEA,KAAKG,IAAL,GAAYH,OAAO,CAACI,GAAR,IAAe,UAA3B;EACA,KAAKC,cAAL,GAAsBJ,aAAtB;AACD;;AAEDF,cAAc,CAACO,SAAf,CAAyBC,KAAzB,GAAiC,UAASC,GAAT,EAAcC,IAAd,EAAoBC,EAApB,EAAwB;EACvD,IAAIC,IAAI,GAAG,IAAX;;EACA,KAAKN,cAAL,CAAoBI,IAApB,EAA0BD,GAA1B,EAA+B,UAASI,GAAT,EAAcC,GAAd,EAAmB;IAChD,IAAID,GAAJ,EAAS;MACP,OAAOF,EAAE,CAACE,GAAD,CAAT;IACD,CAH+C,CAIhD;;;IACA,IAAI,CAACJ,GAAG,CAACM,OAAT,EAAkB;MAChBN,GAAG,CAACM,OAAJ,GAAc,EAAd;IACD;;IACD,IAAI,CAACN,GAAG,CAACM,OAAJ,CAAYH,IAAI,CAACR,IAAjB,CAAL,EAA6B;MAC3BK,GAAG,CAACM,OAAJ,CAAYH,IAAI,CAACR,IAAjB,IAAyB,EAAzB;IACD;;IACDK,GAAG,CAACM,OAAJ,CAAYH,IAAI,CAACR,IAAjB,EAAuBM,IAAvB,GAA8BI,GAA9B;IACAH,EAAE;EACH,CAbD;AAcD,CAhBD;;AAkBAX,cAAc,CAACO,SAAf,CAAyBS,MAAzB,GAAkC,UAASP,GAAT,EAAcE,EAAd,EAAkB;EAClD,IAAIF,GAAG,CAACM,OAAJ,IAAeN,GAAG,CAACM,OAAJ,CAAY,KAAKX,IAAjB,CAAnB,EAA2C;IACzC,OAAOK,GAAG,CAACM,OAAJ,CAAY,KAAKX,IAAjB,EAAuBM,IAA9B;EACD;;EAEDC,EAAE,IAAIA,EAAE,EAAR;AACD,CAND;;AASAM,MAAM,CAACC,OAAP,GAAiBlB,cAAjB"},"metadata":{},"sourceType":"script"}