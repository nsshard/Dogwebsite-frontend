{"ast":null,"code":"const util = require(\"util\");\n\nconst multer = require(\"multer\");\n\nconst fs = require(\"fs\");\n\nconst MIME_TYPES = {\n  'image/jpg': 'jpg',\n  'image/jpeg': 'jpg',\n  'image/png': 'png',\n  'image/gif': 'gif'\n};\nconst maxSize = 2 * 1024 * 1024;\nlet storage = multer.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"../img/\");\n  },\n  filename: (req, file, cb) => {\n    console.log(file.originalname);\n    cb(null, file.originalname);\n  }\n});\nlet uploadFile = multer({\n  storage: storage,\n  limits: {\n    fileSize: maxSize\n  }\n}).single(\"file\");\nlet uploadFileMiddleware = util.promisify(uploadFile);\nmodule.exports = uploadFileMiddleware;","map":{"version":3,"names":["util","require","multer","fs","MIME_TYPES","maxSize","storage","diskStorage","destination","req","file","cb","filename","console","log","originalname","uploadFile","limits","fileSize","single","uploadFileMiddleware","promisify","module","exports"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/src/backend/middleware/HandleImageUpload.js"],"sourcesContent":["const util = require(\"util\");\r\nconst multer = require(\"multer\");\r\nconst fs = require(\"fs\");\r\n\r\nconst MIME_TYPES = {\r\n  'image/jpg': 'jpg',\r\n  'image/jpeg': 'jpg',\r\n  'image/png': 'png',\r\n  'image/gif': 'gif',\r\n  \r\n};\r\n\r\nconst maxSize = 2 * 1024 * 1024;\r\nlet storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"../img/\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    console.log(file.originalname);\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\nlet uploadFile = multer({\r\n  storage: storage,\r\n  limits: { fileSize: maxSize },\r\n}).single(\"file\");\r\nlet uploadFileMiddleware = util.promisify(uploadFile);\r\nmodule.exports = uploadFileMiddleware;\r\n"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAME,EAAE,GAAGF,OAAO,CAAC,IAAD,CAAlB;;AAEA,MAAMG,UAAU,GAAG;EACjB,aAAa,KADI;EAEjB,cAAc,KAFG;EAGjB,aAAa,KAHI;EAIjB,aAAa;AAJI,CAAnB;AAQA,MAAMC,OAAO,GAAG,IAAI,IAAJ,GAAW,IAA3B;AACA,IAAIC,OAAO,GAAGJ,MAAM,CAACK,WAAP,CAAmB;EAC/BC,WAAW,EAAE,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;IAC9BA,EAAE,CAAC,IAAD,EAAO,SAAP,CAAF;EACD,CAH8B;EAI/BC,QAAQ,EAAE,CAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;IAC3BE,OAAO,CAACC,GAAR,CAAYJ,IAAI,CAACK,YAAjB;IACAJ,EAAE,CAAC,IAAD,EAAOD,IAAI,CAACK,YAAZ,CAAF;EACD;AAP8B,CAAnB,CAAd;AASA,IAAIC,UAAU,GAAGd,MAAM,CAAC;EACtBI,OAAO,EAAEA,OADa;EAEtBW,MAAM,EAAE;IAAEC,QAAQ,EAAEb;EAAZ;AAFc,CAAD,CAAN,CAGdc,MAHc,CAGP,MAHO,CAAjB;AAIA,IAAIC,oBAAoB,GAAGpB,IAAI,CAACqB,SAAL,CAAeL,UAAf,CAA3B;AACAM,MAAM,CAACC,OAAP,GAAiBH,oBAAjB"},"metadata":{},"sourceType":"module"}