{"ast":null,"code":"'use strict';\n/**\n * CORS middleware\n *\n * @param {Object} [options]\n * @return {GeneratorFunction}\n * @api public\n */\n\nmodule.exports = function getMiddleware(options) {\n  options = options || {};\n  var defaults = {\n    origin: true,\n    methods: 'GET,HEAD,PUT,POST,DELETE'\n  }; // Set defaults\n\n  for (var key in defaults) {\n    if (!options.hasOwnProperty(key)) {\n      options[key] = defaults[key];\n    }\n  } // Set expose\n\n\n  if (Array.isArray(options.expose)) {\n    options.expose = options.expose.join(',');\n  } // Set maxAge\n\n\n  if (typeof options.maxAge === 'number') {\n    options.maxAge = options.maxAge.toString();\n  } else {\n    options.maxAge = null;\n  } // Set methods\n\n\n  if (Array.isArray(options.methods)) {\n    options.methods = options.methods.join(',');\n  } // Set headers\n\n\n  if (Array.isArray(options.headers)) {\n    options.headers = options.headers.join(',');\n  }\n\n  return function* cors(next) {\n    /**\n     * Access Control Allow Origin\n     */\n    var origin;\n\n    if (typeof options.origin === 'string') {\n      origin = options.origin;\n    } else if (options.origin === true) {\n      origin = this.get('origin') || '*';\n    } else if (options.origin === false) {\n      origin = options.origin;\n    } else if (typeof options.origin === 'function') {\n      origin = options.origin(this.request);\n    }\n\n    if (origin === false) return;\n    this.set('Access-Control-Allow-Origin', origin);\n    /**\n     * Access Control Expose Headers\n     */\n\n    if (options.expose) {\n      this.set('Access-Control-Expose-Headers', options.expose);\n    }\n    /**\n     * Access Control Max Age\n     */\n\n\n    if (options.maxAge) {\n      this.set('Access-Control-Max-Age', options.maxAge);\n    }\n    /**\n     * Access Control Allow Credentials\n     */\n\n\n    if (options.credentials === true) {\n      this.set('Access-Control-Allow-Credentials', 'true');\n    }\n    /**\n     * Access Control Allow Methods\n     */\n\n\n    this.set('Access-Control-Allow-Methods', options.methods);\n    /**\n     * Access Control Allow Headers\n     */\n\n    var headers;\n\n    if (options.headers) {\n      headers = options.headers;\n    } else {\n      headers = this.get('access-control-request-headers');\n    }\n\n    if (headers) {\n      this.set('Access-Control-Allow-Headers', headers);\n    }\n    /**\n     * Returns\n     */\n\n\n    if (this.method === 'OPTIONS') {\n      this.status = 204;\n    } else {\n      yield next;\n    }\n  };\n};","map":{"version":3,"names":["module","exports","getMiddleware","options","defaults","origin","methods","key","hasOwnProperty","Array","isArray","expose","join","maxAge","toString","headers","cors","next","get","request","set","credentials","method","status"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/koa-cors/index.js"],"sourcesContent":["'use strict';\n\n/**\n * CORS middleware\n *\n * @param {Object} [options]\n * @return {GeneratorFunction}\n * @api public\n */\nmodule.exports = function getMiddleware(options) {\n  \n  options = options || {};\n\n  var defaults = {\n    origin: true,\n    methods: 'GET,HEAD,PUT,POST,DELETE'\n  };\n\n  // Set defaults\n  for (var key in defaults) {\n    if (!options.hasOwnProperty(key)) {\n      options[key] = defaults[key];\n    }\n  }\n\n  // Set expose\n  if (Array.isArray(options.expose)) {\n    options.expose = options.expose.join(',');\n  }\n\n  // Set maxAge\n  if (typeof options.maxAge === 'number') {\n    options.maxAge = options.maxAge.toString();\n  } else {\n    options.maxAge = null;\n  }\n\n  // Set methods\n  if (Array.isArray(options.methods)) {\n    options.methods = options.methods.join(',');\n  }\n\n  // Set headers\n  if (Array.isArray(options.headers)) {\n    options.headers = options.headers.join(',');\n  }\n\n  return function* cors(next) {\n    \n    /**\n     * Access Control Allow Origin\n     */\n    var origin;\n\n    if (typeof options.origin === 'string') {\n      origin = options.origin;\n    } else if (options.origin === true) {\n      origin = this.get('origin') || '*';\n    } else if (options.origin === false) {\n      origin = options.origin;\n    } else if (typeof options.origin === 'function') {\n      origin = options.origin(this.request);\n    }\n\n    if (origin === false) return;\n\n    this.set('Access-Control-Allow-Origin', origin);\n\n    /**\n     * Access Control Expose Headers\n     */\n    if (options.expose) {\n      this.set('Access-Control-Expose-Headers', options.expose);\n    }\n\n    /**\n     * Access Control Max Age\n     */\n    if (options.maxAge) {\n      this.set('Access-Control-Max-Age', options.maxAge);\n    }\n\n    /**\n     * Access Control Allow Credentials\n     */\n    if (options.credentials === true) {\n      this.set('Access-Control-Allow-Credentials', 'true');\n    }\n\n    /**\n     * Access Control Allow Methods\n     */\n    this.set('Access-Control-Allow-Methods', options.methods);\n\n    /**\n     * Access Control Allow Headers\n     */\n    var headers;\n\n    if (options.headers) {\n      headers = options.headers;\n    } else {\n      headers = this.get('access-control-request-headers');\n    }\n\n    if (headers) {\n      this.set('Access-Control-Allow-Headers', headers);\n    }\n\n    /**\n     * Returns\n     */\n    if (this.method === 'OPTIONS') {\n      this.status = 204;\n    } else {\n      yield next;\n    }\n  };\n};\n"],"mappings":"AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,MAAM,CAACC,OAAP,GAAiB,SAASC,aAAT,CAAuBC,OAAvB,EAAgC;EAE/CA,OAAO,GAAGA,OAAO,IAAI,EAArB;EAEA,IAAIC,QAAQ,GAAG;IACbC,MAAM,EAAE,IADK;IAEbC,OAAO,EAAE;EAFI,CAAf,CAJ+C,CAS/C;;EACA,KAAK,IAAIC,GAAT,IAAgBH,QAAhB,EAA0B;IACxB,IAAI,CAACD,OAAO,CAACK,cAAR,CAAuBD,GAAvB,CAAL,EAAkC;MAChCJ,OAAO,CAACI,GAAD,CAAP,GAAeH,QAAQ,CAACG,GAAD,CAAvB;IACD;EACF,CAd8C,CAgB/C;;;EACA,IAAIE,KAAK,CAACC,OAAN,CAAcP,OAAO,CAACQ,MAAtB,CAAJ,EAAmC;IACjCR,OAAO,CAACQ,MAAR,GAAiBR,OAAO,CAACQ,MAAR,CAAeC,IAAf,CAAoB,GAApB,CAAjB;EACD,CAnB8C,CAqB/C;;;EACA,IAAI,OAAOT,OAAO,CAACU,MAAf,KAA0B,QAA9B,EAAwC;IACtCV,OAAO,CAACU,MAAR,GAAiBV,OAAO,CAACU,MAAR,CAAeC,QAAf,EAAjB;EACD,CAFD,MAEO;IACLX,OAAO,CAACU,MAAR,GAAiB,IAAjB;EACD,CA1B8C,CA4B/C;;;EACA,IAAIJ,KAAK,CAACC,OAAN,CAAcP,OAAO,CAACG,OAAtB,CAAJ,EAAoC;IAClCH,OAAO,CAACG,OAAR,GAAkBH,OAAO,CAACG,OAAR,CAAgBM,IAAhB,CAAqB,GAArB,CAAlB;EACD,CA/B8C,CAiC/C;;;EACA,IAAIH,KAAK,CAACC,OAAN,CAAcP,OAAO,CAACY,OAAtB,CAAJ,EAAoC;IAClCZ,OAAO,CAACY,OAAR,GAAkBZ,OAAO,CAACY,OAAR,CAAgBH,IAAhB,CAAqB,GAArB,CAAlB;EACD;;EAED,OAAO,UAAUI,IAAV,CAAeC,IAAf,EAAqB;IAE1B;AACJ;AACA;IACI,IAAIZ,MAAJ;;IAEA,IAAI,OAAOF,OAAO,CAACE,MAAf,KAA0B,QAA9B,EAAwC;MACtCA,MAAM,GAAGF,OAAO,CAACE,MAAjB;IACD,CAFD,MAEO,IAAIF,OAAO,CAACE,MAAR,KAAmB,IAAvB,EAA6B;MAClCA,MAAM,GAAG,KAAKa,GAAL,CAAS,QAAT,KAAsB,GAA/B;IACD,CAFM,MAEA,IAAIf,OAAO,CAACE,MAAR,KAAmB,KAAvB,EAA8B;MACnCA,MAAM,GAAGF,OAAO,CAACE,MAAjB;IACD,CAFM,MAEA,IAAI,OAAOF,OAAO,CAACE,MAAf,KAA0B,UAA9B,EAA0C;MAC/CA,MAAM,GAAGF,OAAO,CAACE,MAAR,CAAe,KAAKc,OAApB,CAAT;IACD;;IAED,IAAId,MAAM,KAAK,KAAf,EAAsB;IAEtB,KAAKe,GAAL,CAAS,6BAAT,EAAwCf,MAAxC;IAEA;AACJ;AACA;;IACI,IAAIF,OAAO,CAACQ,MAAZ,EAAoB;MAClB,KAAKS,GAAL,CAAS,+BAAT,EAA0CjB,OAAO,CAACQ,MAAlD;IACD;IAED;AACJ;AACA;;;IACI,IAAIR,OAAO,CAACU,MAAZ,EAAoB;MAClB,KAAKO,GAAL,CAAS,wBAAT,EAAmCjB,OAAO,CAACU,MAA3C;IACD;IAED;AACJ;AACA;;;IACI,IAAIV,OAAO,CAACkB,WAAR,KAAwB,IAA5B,EAAkC;MAChC,KAAKD,GAAL,CAAS,kCAAT,EAA6C,MAA7C;IACD;IAED;AACJ;AACA;;;IACI,KAAKA,GAAL,CAAS,8BAAT,EAAyCjB,OAAO,CAACG,OAAjD;IAEA;AACJ;AACA;;IACI,IAAIS,OAAJ;;IAEA,IAAIZ,OAAO,CAACY,OAAZ,EAAqB;MACnBA,OAAO,GAAGZ,OAAO,CAACY,OAAlB;IACD,CAFD,MAEO;MACLA,OAAO,GAAG,KAAKG,GAAL,CAAS,gCAAT,CAAV;IACD;;IAED,IAAIH,OAAJ,EAAa;MACX,KAAKK,GAAL,CAAS,8BAAT,EAAyCL,OAAzC;IACD;IAED;AACJ;AACA;;;IACI,IAAI,KAAKO,MAAL,KAAgB,SAApB,EAA+B;MAC7B,KAAKC,MAAL,GAAc,GAAd;IACD,CAFD,MAEO;MACL,MAAMN,IAAN;IACD;EACF,CAtED;AAuED,CA7GD"},"metadata":{},"sourceType":"script"}