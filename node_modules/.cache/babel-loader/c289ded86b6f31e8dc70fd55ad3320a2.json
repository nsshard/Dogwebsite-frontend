{"ast":null,"code":"'use strict';\n/**\n * Module dependencies.\n */\n\nconst isGeneratorFunction = require('is-generator-function');\n\nconst debug = require('debug')('koa:application');\n\nconst onFinished = require('on-finished');\n\nconst response = require('./response');\n\nconst compose = require('koa-compose');\n\nconst context = require('./context');\n\nconst request = require('./request');\n\nconst statuses = require('statuses');\n\nconst Emitter = require('events');\n\nconst util = require('util');\n\nconst Stream = require('stream');\n\nconst http = require('http');\n\nconst only = require('only');\n\nconst convert = require('koa-convert');\n\nconst deprecate = require('depd')('koa');\n\nconst {\n  HttpError\n} = require('http-errors');\n/**\n * Expose `Application` class.\n * Inherits from `Emitter.prototype`.\n */\n\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * Initialize a new `Application`.\n   *\n   * @api public\n   */\n\n  /**\n    *\n    * @param {object} [options] Application options\n    * @param {string} [options.env='development'] Environment\n    * @param {string[]} [options.keys] Signed cookie keys\n    * @param {boolean} [options.proxy] Trust proxy headers\n    * @param {number} [options.subdomainOffset] Subdomain offset\n    * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n    * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n    *\n    */\n  constructor(options) {\n    super();\n    options = options || {};\n    this.proxy = options.proxy || false;\n    this.subdomainOffset = options.subdomainOffset || 2;\n    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For';\n    this.maxIpsCount = options.maxIpsCount || 0;\n    this.env = options.env || process.env.NODE_ENV || 'development';\n    if (options.keys) this.keys = options.keys;\n    this.middleware = [];\n    this.context = Object.create(context);\n    this.request = Object.create(request);\n    this.response = Object.create(response); // util.inspect.custom support for node 6+\n\n    /* istanbul ignore else */\n\n    if (util.inspect.custom) {\n      this[util.inspect.custom] = this.inspect;\n    }\n  }\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n\n  listen() {\n    debug('listen');\n    const server = http.createServer(this.callback());\n    return server.listen(...arguments);\n  }\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n\n  toJSON() {\n    return only(this, ['subdomainOffset', 'proxy', 'env']);\n  }\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n\n  inspect() {\n    return this.toJSON();\n  }\n  /**\n   * Use the given middleware `fn`.\n   *\n   * Old-style middleware will be converted.\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' + 'See the documentation for examples of how to convert old middleware ' + 'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n\n  callback() {\n    const fn = compose(this.middleware);\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);\n      return this.handleRequest(ctx, fn);\n    };\n\n    return handleRequest;\n  }\n  /**\n   * Handle request in callback.\n   *\n   * @api private\n   */\n\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n\n    const onerror = err => ctx.onerror(err);\n\n    const handleResponse = () => respond(ctx);\n\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.state = {};\n    return context;\n  }\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n\n  onerror(err) {\n    // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n    // See https://github.com/koajs/koa/issues/1466\n    // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n    const isNativeError = Object.prototype.toString.call(err) === '[object Error]' || err instanceof Error;\n    if (!isNativeError) throw new TypeError(util.format('non-error thrown: %j', err));\n    if (404 === err.status || err.expose) return;\n    if (this.silent) return;\n    const msg = err.stack || err.toString();\n    console.error(`\\n${msg.replace(/^/gm, '  ')}\\n`);\n  }\n  /**\n   * Help TS users comply to CommonJS, ESM, bundler mismatch.\n   * @see https://github.com/koajs/koa/issues/1513\n   */\n\n\n  static get default() {\n    return Application;\n  }\n\n};\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n  if (!ctx.writable) return;\n  const res = ctx.res;\n  let body = ctx.body;\n  const code = ctx.status; // ignore body\n\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n\n  if ('HEAD' === ctx.method) {\n    if (!res.headersSent && !ctx.response.has('Content-Length')) {\n      const {\n        length\n      } = ctx.response;\n      if (Number.isInteger(length)) ctx.length = length;\n    }\n\n    return res.end();\n  } // status body\n\n\n  if (null == body) {\n    if (ctx.response._explicitNullBody) {\n      ctx.response.remove('Content-Type');\n      ctx.response.remove('Transfer-Encoding');\n      return res.end();\n    }\n\n    if (ctx.req.httpVersionMajor >= 2) {\n      body = String(code);\n    } else {\n      body = ctx.message || String(code);\n    }\n\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n\n    return res.end(body);\n  } // responses\n\n\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' === typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res); // body: json\n\n  body = JSON.stringify(body);\n\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n\n  res.end(body);\n}\n/**\n * Make HttpError available to consumers of the library so that consumers don't\n * have a direct dependency upon `http-errors`\n */\n\n\nmodule.exports.HttpError = HttpError;","map":{"version":3,"names":["isGeneratorFunction","require","debug","onFinished","response","compose","context","request","statuses","Emitter","util","Stream","http","only","convert","deprecate","HttpError","module","exports","Application","constructor","options","proxy","subdomainOffset","proxyIpHeader","maxIpsCount","env","process","NODE_ENV","keys","middleware","Object","create","inspect","custom","listen","server","createServer","callback","toJSON","use","fn","TypeError","_name","name","push","listenerCount","on","onerror","handleRequest","req","res","ctx","createContext","fnMiddleware","statusCode","err","handleResponse","respond","then","catch","app","originalUrl","url","state","isNativeError","prototype","toString","call","Error","format","status","expose","silent","msg","stack","console","error","replace","default","writable","body","code","empty","end","method","headersSent","has","length","Number","isInteger","_explicitNullBody","remove","httpVersionMajor","String","message","type","Buffer","byteLength","isBuffer","pipe","JSON","stringify"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/koa/lib/application.js"],"sourcesContent":["\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nconst isGeneratorFunction = require('is-generator-function');\nconst debug = require('debug')('koa:application');\nconst onFinished = require('on-finished');\nconst response = require('./response');\nconst compose = require('koa-compose');\nconst context = require('./context');\nconst request = require('./request');\nconst statuses = require('statuses');\nconst Emitter = require('events');\nconst util = require('util');\nconst Stream = require('stream');\nconst http = require('http');\nconst only = require('only');\nconst convert = require('koa-convert');\nconst deprecate = require('depd')('koa');\nconst { HttpError } = require('http-errors');\n\n/**\n * Expose `Application` class.\n * Inherits from `Emitter.prototype`.\n */\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * Initialize a new `Application`.\n   *\n   * @api public\n   */\n\n  /**\n    *\n    * @param {object} [options] Application options\n    * @param {string} [options.env='development'] Environment\n    * @param {string[]} [options.keys] Signed cookie keys\n    * @param {boolean} [options.proxy] Trust proxy headers\n    * @param {number} [options.subdomainOffset] Subdomain offset\n    * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n    * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n    *\n    */\n\n  constructor(options) {\n    super();\n    options = options || {};\n    this.proxy = options.proxy || false;\n    this.subdomainOffset = options.subdomainOffset || 2;\n    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For';\n    this.maxIpsCount = options.maxIpsCount || 0;\n    this.env = options.env || process.env.NODE_ENV || 'development';\n    if (options.keys) this.keys = options.keys;\n    this.middleware = [];\n    this.context = Object.create(context);\n    this.request = Object.create(request);\n    this.response = Object.create(response);\n    // util.inspect.custom support for node 6+\n    /* istanbul ignore else */\n    if (util.inspect.custom) {\n      this[util.inspect.custom] = this.inspect;\n    }\n  }\n\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n  listen(...args) {\n    debug('listen');\n    const server = http.createServer(this.callback());\n    return server.listen(...args);\n  }\n\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return only(this, [\n      'subdomainOffset',\n      'proxy',\n      'env'\n    ]);\n  }\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    return this.toJSON();\n  }\n\n  /**\n   * Use the given middleware `fn`.\n   *\n   * Old-style middleware will be converted.\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' +\n                'See the documentation for examples of how to convert old middleware ' +\n                'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n  callback() {\n    const fn = compose(this.middleware);\n\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);\n      return this.handleRequest(ctx, fn);\n    };\n\n    return handleRequest;\n  }\n\n  /**\n   * Handle request in callback.\n   *\n   * @api private\n   */\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n    const onerror = err => ctx.onerror(err);\n    const handleResponse = () => respond(ctx);\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.state = {};\n    return context;\n  }\n\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n    // See https://github.com/koajs/koa/issues/1466\n    // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n    const isNativeError =\n      Object.prototype.toString.call(err) === '[object Error]' ||\n      err instanceof Error;\n    if (!isNativeError) throw new TypeError(util.format('non-error thrown: %j', err));\n\n    if (404 === err.status || err.expose) return;\n    if (this.silent) return;\n\n    const msg = err.stack || err.toString();\n    console.error(`\\n${msg.replace(/^/gm, '  ')}\\n`);\n  }\n\n  /**\n   * Help TS users comply to CommonJS, ESM, bundler mismatch.\n   * @see https://github.com/koajs/koa/issues/1513\n   */\n\n  static get default() {\n    return Application;\n  }\n};\n\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n\n  if (!ctx.writable) return;\n\n  const res = ctx.res;\n  let body = ctx.body;\n  const code = ctx.status;\n\n  // ignore body\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n\n  if ('HEAD' === ctx.method) {\n    if (!res.headersSent && !ctx.response.has('Content-Length')) {\n      const { length } = ctx.response;\n      if (Number.isInteger(length)) ctx.length = length;\n    }\n    return res.end();\n  }\n\n  // status body\n  if (null == body) {\n    if (ctx.response._explicitNullBody) {\n      ctx.response.remove('Content-Type');\n      ctx.response.remove('Transfer-Encoding');\n      return res.end();\n    }\n    if (ctx.req.httpVersionMajor >= 2) {\n      body = String(code);\n    } else {\n      body = ctx.message || String(code);\n    }\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n    return res.end(body);\n  }\n\n  // responses\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' === typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res);\n\n  // body: json\n  body = JSON.stringify(body);\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n  res.end(body);\n}\n\n/**\n * Make HttpError available to consumers of the library so that consumers don't\n * have a direct dependency upon `http-errors`\n */\n\nmodule.exports.HttpError = HttpError;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}