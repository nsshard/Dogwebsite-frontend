{"ast":null,"code":"'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\n\nconst handleCallback = require('../utils').handleCallback;\n\nconst MongoError = require('../core').MongoError;\n\nclass OptionsOperation extends OperationBase {\n  constructor(collection, options) {\n    super(options);\n    this.collection = collection;\n  }\n\n  execute(callback) {\n    const coll = this.collection;\n    const opts = this.options;\n    coll.s.db.listCollections({\n      name: coll.collectionName\n    }, opts).toArray((err, collections) => {\n      if (err) return handleCallback(callback, err);\n\n      if (collections.length === 0) {\n        return handleCallback(callback, MongoError.create({\n          message: `collection ${coll.namespace} not found`,\n          driver: true\n        }));\n      }\n\n      handleCallback(callback, err, collections[0].options || null);\n    });\n  }\n\n}\n\nmodule.exports = OptionsOperation;","map":{"version":3,"names":["OperationBase","require","handleCallback","MongoError","OptionsOperation","constructor","collection","options","execute","callback","coll","opts","s","db","listCollections","name","collectionName","toArray","err","collections","length","create","message","namespace","driver","module","exports"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/koa-mongo/node_modules/mongodb/lib/operations/options_operation.js"],"sourcesContent":["'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\nconst handleCallback = require('../utils').handleCallback;\nconst MongoError = require('../core').MongoError;\n\nclass OptionsOperation extends OperationBase {\n  constructor(collection, options) {\n    super(options);\n\n    this.collection = collection;\n  }\n\n  execute(callback) {\n    const coll = this.collection;\n    const opts = this.options;\n\n    coll.s.db.listCollections({ name: coll.collectionName }, opts).toArray((err, collections) => {\n      if (err) return handleCallback(callback, err);\n      if (collections.length === 0) {\n        return handleCallback(\n          callback,\n          MongoError.create({ message: `collection ${coll.namespace} not found`, driver: true })\n        );\n      }\n\n      handleCallback(callback, err, collections[0].options || null);\n    });\n  }\n}\n\nmodule.exports = OptionsOperation;\n"],"mappings":"AAAA;;AAEA,MAAMA,aAAa,GAAGC,OAAO,CAAC,aAAD,CAAP,CAAuBD,aAA7C;;AACA,MAAME,cAAc,GAAGD,OAAO,CAAC,UAAD,CAAP,CAAoBC,cAA3C;;AACA,MAAMC,UAAU,GAAGF,OAAO,CAAC,SAAD,CAAP,CAAmBE,UAAtC;;AAEA,MAAMC,gBAAN,SAA+BJ,aAA/B,CAA6C;EAC3CK,WAAW,CAACC,UAAD,EAAaC,OAAb,EAAsB;IAC/B,MAAMA,OAAN;IAEA,KAAKD,UAAL,GAAkBA,UAAlB;EACD;;EAEDE,OAAO,CAACC,QAAD,EAAW;IAChB,MAAMC,IAAI,GAAG,KAAKJ,UAAlB;IACA,MAAMK,IAAI,GAAG,KAAKJ,OAAlB;IAEAG,IAAI,CAACE,CAAL,CAAOC,EAAP,CAAUC,eAAV,CAA0B;MAAEC,IAAI,EAAEL,IAAI,CAACM;IAAb,CAA1B,EAAyDL,IAAzD,EAA+DM,OAA/D,CAAuE,CAACC,GAAD,EAAMC,WAAN,KAAsB;MAC3F,IAAID,GAAJ,EAAS,OAAOhB,cAAc,CAACO,QAAD,EAAWS,GAAX,CAArB;;MACT,IAAIC,WAAW,CAACC,MAAZ,KAAuB,CAA3B,EAA8B;QAC5B,OAAOlB,cAAc,CACnBO,QADmB,EAEnBN,UAAU,CAACkB,MAAX,CAAkB;UAAEC,OAAO,EAAG,cAAaZ,IAAI,CAACa,SAAU,YAAxC;UAAqDC,MAAM,EAAE;QAA7D,CAAlB,CAFmB,CAArB;MAID;;MAEDtB,cAAc,CAACO,QAAD,EAAWS,GAAX,EAAgBC,WAAW,CAAC,CAAD,CAAX,CAAeZ,OAAf,IAA0B,IAA1C,CAAd;IACD,CAVD;EAWD;;AAtB0C;;AAyB7CkB,MAAM,CAACC,OAAP,GAAiBtB,gBAAjB"},"metadata":{},"sourceType":"script"}