{"ast":null,"code":"var mysql = require('mysql'); // Thunkify query methods\n\n\nfunction wrapQueryMethod(fn, ctx) {\n  return function () {\n    // Obtain function arguments\n    var args = [].slice.call(arguments); // Return a thunkified function that receives a done callback\n\n    return function (done) {\n      // Add a custom callback to provided args\n      args.push(function (err, result) {\n        // Query failed?\n        if (err) {\n          return done(err);\n        } // Query succeeded\n\n\n        done(null, result);\n      }); // Execute the query\n\n      fn.apply(ctx, args);\n    };\n  };\n} // Wrap a MySQL connection object's query methods\n\n\nfunction wrapConnection(conn) {\n  // Already wrapped this function?\n  if (conn._coWrapped) {\n    return conn;\n  } // Set flag to avoid re-wrapping\n\n\n  conn._coWrapped = true; // Functions to thunkify\n\n  var queryMethods = ['query', 'execute']; // Traverse query methods list\n\n  queryMethods.forEach(function (name) {\n    // Thunkify the method\n    conn[name] = wrapQueryMethod(conn[name], conn);\n  }); // Return co-friendly connection\n\n  return conn;\n}\n\nmodule.exports = {\n  createConnection: function (opts) {\n    // Wrap createConnectionfunction\n    return wrapConnection(mysql.createConnection(opts));\n  },\n  createPool: function (opts) {\n    // Wrap createPool function\n    return wrapConnection(mysql.createPool(opts));\n  }\n};","map":{"version":3,"names":["mysql","require","wrapQueryMethod","fn","ctx","args","slice","call","arguments","done","push","err","result","apply","wrapConnection","conn","_coWrapped","queryMethods","forEach","name","module","exports","createConnection","opts","createPool"],"sources":["C:/Users/Administrator/Desktop/webAPI work/web/dog-website/node_modules/koa-mysql/wrapper.js"],"sourcesContent":["var mysql = require('mysql');\n\n// Thunkify query methods\nfunction wrapQueryMethod(fn, ctx) {\n    return function() {\n        // Obtain function arguments\n        var args = [].slice.call(arguments);\n        \n        // Return a thunkified function that receives a done callback\n        return function(done) {\n            // Add a custom callback to provided args\n            args.push(function(err, result) {\n                // Query failed?\n                if (err) {\n                    return done(err);\n                }\n\n                // Query succeeded\n                done(null, result);\n            });\n\n            // Execute the query\n            fn.apply(ctx, args);\n        };\n    };\n}\n\n// Wrap a MySQL connection object's query methods\nfunction wrapConnection(conn) {\n    // Already wrapped this function?\n    if (conn._coWrapped) {\n        return conn;\n    }\n        \n    // Set flag to avoid re-wrapping\n    conn._coWrapped = true;\n\n    // Functions to thunkify\n    var queryMethods = [\n        'query',\n        'execute'\n    ];\n    \n    // Traverse query methods list\n    queryMethods.forEach(function(name) {\n        // Thunkify the method\n        conn[name] = wrapQueryMethod(conn[name], conn);\n    });\n    \n    // Return co-friendly connection\n    return conn;\n}\n\nmodule.exports = {\n    createConnection: function(opts) {\n        // Wrap createConnectionfunction\n        return wrapConnection(mysql.createConnection(opts));\n    },\n\n    createPool: function(opts) {\n        // Wrap createPool function\n        return wrapConnection(mysql.createPool(opts));\n    }\n};"],"mappings":"AAAA,IAAIA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAnB,C,CAEA;;;AACA,SAASC,eAAT,CAAyBC,EAAzB,EAA6BC,GAA7B,EAAkC;EAC9B,OAAO,YAAW;IACd;IACA,IAAIC,IAAI,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcC,SAAd,CAAX,CAFc,CAId;;IACA,OAAO,UAASC,IAAT,EAAe;MAClB;MACAJ,IAAI,CAACK,IAAL,CAAU,UAASC,GAAT,EAAcC,MAAd,EAAsB;QAC5B;QACA,IAAID,GAAJ,EAAS;UACL,OAAOF,IAAI,CAACE,GAAD,CAAX;QACH,CAJ2B,CAM5B;;;QACAF,IAAI,CAAC,IAAD,EAAOG,MAAP,CAAJ;MACH,CARD,EAFkB,CAYlB;;MACAT,EAAE,CAACU,KAAH,CAAST,GAAT,EAAcC,IAAd;IACH,CAdD;EAeH,CApBD;AAqBH,C,CAED;;;AACA,SAASS,cAAT,CAAwBC,IAAxB,EAA8B;EAC1B;EACA,IAAIA,IAAI,CAACC,UAAT,EAAqB;IACjB,OAAOD,IAAP;EACH,CAJyB,CAM1B;;;EACAA,IAAI,CAACC,UAAL,GAAkB,IAAlB,CAP0B,CAS1B;;EACA,IAAIC,YAAY,GAAG,CACf,OADe,EAEf,SAFe,CAAnB,CAV0B,CAe1B;;EACAA,YAAY,CAACC,OAAb,CAAqB,UAASC,IAAT,EAAe;IAChC;IACAJ,IAAI,CAACI,IAAD,CAAJ,GAAajB,eAAe,CAACa,IAAI,CAACI,IAAD,CAAL,EAAaJ,IAAb,CAA5B;EACH,CAHD,EAhB0B,CAqB1B;;EACA,OAAOA,IAAP;AACH;;AAEDK,MAAM,CAACC,OAAP,GAAiB;EACbC,gBAAgB,EAAE,UAASC,IAAT,EAAe;IAC7B;IACA,OAAOT,cAAc,CAACd,KAAK,CAACsB,gBAAN,CAAuBC,IAAvB,CAAD,CAArB;EACH,CAJY;EAMbC,UAAU,EAAE,UAASD,IAAT,EAAe;IACvB;IACA,OAAOT,cAAc,CAACd,KAAK,CAACwB,UAAN,CAAiBD,IAAjB,CAAD,CAArB;EACH;AATY,CAAjB"},"metadata":{},"sourceType":"script"}